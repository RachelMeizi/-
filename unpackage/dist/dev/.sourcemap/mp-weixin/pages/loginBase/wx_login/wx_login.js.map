{"version":3,"sources":["webpack:///D:/work/HBuilder/applianceRepairShop/main.js","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue?07ae","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue?366f","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue?9ef8","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue?c3b6","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue?bbc0","webpack:///D:/work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue?5cf4"],"names":["createPage","Page","data","disabledBtn","canIUse","uni","onReady","onLoad","e","that","code","setStorageSync","console","log","$store","state","hasPhone","userInfo","msg","getStorageSync","methods","getUserInfo","showLoading","title","login","success","res","detail","nickName","headUrl","avatarUrl","$util","post","then","status","token","get","isShop","commit","navigateTo","url","hideLoading","nickname","headurl","redirectTo","open_id","fail","showModal","content","showCancel","confirmText","confirm","queryUsreInfo"],"mappings":"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","file":"pages/loginBase/wx_login/wx_login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/loginBase/wx_login/wx_login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./wx_login.vue?vue&type=template&id=fdff4618&\"\nvar renderjs\nimport script from \"./wx_login.vue?vue&type=script&lang=js&\"\nexport * from \"./wx_login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wx_login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\360Downloads\\\\Software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('fdff4618')) {\n      api.createRecord('fdff4618', component.options)\n    } else {\n      api.reload('fdff4618', component.options)\n    }\n    module.hot.accept(\"./wx_login.vue?vue&type=template&id=fdff4618&\", function () {\n      api.rerender('fdff4618', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"work/HBuilder/applianceRepairShop/pages/loginBase/wx_login/wx_login.vue\"\nexport default component.exports","export * from \"-!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wx_login.vue?vue&type=template&id=fdff4618&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wx_login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wx_login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tmapState,\n\tmapMutations\n} from 'vuex'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tdisabledBtn: false,\n\t\t\tcanIUse: uni.canIUse('button.open-type.getUserInfo'),\n\t\t}\n\t},\n\tonReady() {\n\n\t},\n\tonLoad(e) {\n\t\tvar that = this;\n\t\t// 查看是否授权\n\t\tif (e.code) {\n\t\t\tuni.setStorageSync('CODE', e)\n\t\t}\n\t\tconsole.log(this.$store.state.hasPhone, '444')\n\t\tthis.$store.state.userInfo.msg = uni.getStorageSync('CODE')\n\n\n\t\t// uni.getSetting({\n\t\t// \tsuccess: (res) => {\n\t\t// \t\tconsole.log(res.authSetting, '44')\n\t\t// \t\tif (res.authSetting['scope.userInfo']) {\n\t\t// \t\t\tuni.getUserInfo({\n\t\t// \t\t\t\tsuccess: (res) => {\n\t\t// \t\t\t\t\t//从数据库获取用户信息\n\t\t// \t\t\t\t\tthat.queryUsreInfo();\n\t\t// \t\t\t\t\t//用户已经授权过\n\t\t// \t\t\t\t\t// uni.navigateTo({\n\t\t// \t\t\t\t\t// \turl: './logins'\n\t\t// \t\t\t\t\t// })\n\n\t\t// \t\t\t\t}\n\t\t// \t\t\t});\n\t\t// \t\t}\n\t\t// \t}\n\t\t// })\n\n\t},\n\tmethods: {\n\t\t...mapMutations(['login']),\n\t\tgetUserInfo(e) {\n\t\t\tconsole.log(e, '点击')\n\t\t\tthis.disabledBtn = true\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '加载中',\n\t\t\t})\n\t\t\tuni.login({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log(e.detail.userInfo, 'e.detail.userInfo');\n\t\t\t\t\tif (e.detail.userInfo) {\n\t\t\t\t\t\t// uni.setStorageSync('CODE', res.code)\n\t\t\t\t\t\t//用户按了允许授权按钮\n\t\t\t\t\t\tvar that = this;\n\t\t\t\t\t\tlet code = res.code, //token\n\t\t\t\t\t\t\tnickName = e.detail.userInfo.nickName,\n\t\t\t\t\t\t\theadUrl = e.detail.userInfo.avatarUrl\n\n\t\t\t\t\t\t//插入登录的用户的相关信息到数据库\n\t\t\t\t\t\tthat.$util.post('/login/wxLogin?code=' + res.code).then(res => {\n\t\t\t\t\t\t\tif (res.data.status == 200) {\n\t\t\t\t\t\t\t\tthis.login(res.data.token);\n\t\t\t\t\t\t\t\tuni.setStorageSync('CODE', res.data.token)\n\t\t\t\t\t\t\t\tthis.$util.get('/xf/PersonalDetails?token=' + res.data.token)\n\t\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\t\tconst isShop = res.data.isShop\n\t\t\t\t\t\t\t\t\t\tthis.$store.state.isShop = isShop\n\t\t\t\t\t\t\t\t\t\tthis.$store.commit('setUserInfo', res.data)\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\t\turl: '/pages/index/index' //普通用户首页\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else if (res.data.status == 401) { //open_id\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tres.data.nickname = nickName\n\t\t\t\t\t\t\t\tres.data.headurl = headUrl\n\t\t\t\t\t\t\t\tuni.setStorageSync('loginData', res.data)\n\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\turl: '/pages/loginBase/logins?openId=' + res.data.open_id + '&nickName=' + nickName + '&headUrl=' +\n\t\t\t\t\t\t\t\t\t\theadUrl\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tthis.$util.fail(res.data.msg)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t})\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//用户按了拒绝按钮\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '警告',\n\t\t\t\t\t\t\tcontent: '您点击了拒绝授权，将无法进入小程序，请授权之后再进入!!!',\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tconfirmText: '返回授权',\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tthis.disabledBtn = false\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tconsole.log('用户点击了“返回授权”')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tqueryUsreInfo() { //getUserInfo\n\t\t\tthis.$util.get('/member/getMeMessage').then(res => {\n\t\t\t\tthis.$store.state.userInfo = res.data\n\t\t\t})\n\t\t},\n\t}\n}\n","import mod from \"-!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wx_login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../360Downloads/Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wx_login.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}